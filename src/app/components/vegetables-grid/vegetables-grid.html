<div class="section-header">
  <h1>Vegetables Section</h1>
<!-- Badge סטטוס התחברות קבוע למעלה -->
<button
  class="auth-badge"
  [class.logged-in]="auth.isLoggedIn"
  [class.logged-out]="!auth.isLoggedIn">
  {{ auth.isLoggedIn ? 'משתמש מחובר' : 'משתמש לא מחובר' }}
</button>
  <!-- כפתור רק לאדמין -->
  <a *ngIf="auth.isAdmin"
     class="admin-add-btn admin-add-btn--veg"
     routerLink="/add-product">
    + Add Product
  </a>
</div>

<p>Price per kg</p>

<div class="vegetables-grid">
  <div *ngFor="let v of vegetables; trackBy: track" class="vegetables-item card">
    <div class="image-wrap">
      <div class="emoji-tile" [attr.aria-label]="v.name">
        {{ v.emoji || (v.category === 'fruit' ? '🍎' : '🥦') }}
      </div>
    </div>

    <h3>{{ v.name }}</h3>
    <p class="price">{{ v.price | number:'1.2-2' }}$</p>
    <a [href]="v.link" target="_blank" rel="noopener noreferrer">Learn more</a>

    <div class="qty-overlay">
      <button type="button" (click)="decQty(v)">−</button>
      <input
        type="number"
        [value]="qtyInput[keyOf(v)] || 1"
        min="1"
        (input)="onQtyInput(v, $any($event.target).value)"
      />
      <button type="button" (click)="incQty(v)">+</button>
    </div>

    <button type="button" (click)="confirmQty(v)">
      Add to Cart ({{ qtyInput[keyOf(v)] || 1 }})
    </button>
  </div>
</div>
